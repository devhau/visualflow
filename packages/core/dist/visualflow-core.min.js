/**
   * @license
   * author:nguyenvanhaudev@gmail.com (Nguyen Van Hau)
   * visualflow_core.js v0.0.1-beta
   * Released under the MIT license.
   */
var visualflow_core=function(){"use strict";var e;!function(e){e[e.All=0]="All",e[e.Web=1]="Web",e[e.PC=2]="PC",e[e.Cloud=3]="Cloud",e[e.Mobile=4]="Mobile",e[e.IOS=5]="IOS",e[e.Android=6]="Android"}(e||(e={}));class t{env(){return[e.All,e.Cloud,e.PC,e.Web,e.Mobile,e.IOS,e.Android]}CheckEnv(e){return this.env().includes(e)}key(){return this.constructor.name}checkKey(e){return this.key()==e}name(){return this.constructor.name}icon(){return'<i class="fas fa-play"></i>'}group(){return"Common"}html({elNode:e,main:t,node:n}){return""}script({elNode:e,main:t,node:n}){}properties(){}option(){}async execute(e,t,n,o){}async nextNode(e,t,n,o=null){if(e?.lines)for(let r of e.lines)r.from!=n||null!=o&&r.fromIndex!=o||await t(r.to)}}class n extends t{key(){return"core_alert"}name(){return"Alert"}icon(){return'<i class="fas fa-bell"></i>'}html({elNode:e,main:t,node:n}){return'<div class="pr10 pl10 pb4"><input type="text" class="node-form-control" node:model="message"/></div>'}properties(){return{message:{key:"message",edit:!0,default:"${Date()}"}}}async execute(e,t,n,o){alert(n.getText(t?.message,e)),await this.nextNode(t,o,e)}}class o extends t{key(){return"core_assign"}name(){return"Assign"}icon(){return'<i class="fas fa-bolt"></i>'}properties(){return{env_name:{key:"env_name",edit:!0,default:""},env_value:{key:"env_value",edit:!0,default:""}}}option(){return{class:"",dot:{left:1,top:0,right:0,bottom:0}}}html({elNode:e,main:t,node:n}){return'<div class="node-content-row">\n    <div class="pl10 pr0 pt2 pb2"><input type="text" class="node-form-control" node:model="env_name"/> </div>\n    <div class="flex-none p2 text-center">=</div>\n    <div class="pr10 pl0 pt2 pb2"><input type="text" class="node-form-control" node:model="env_value"/></div>\n    <div><span class="node-dot" node="50000"></span></div>\n    </div>'}async execute(e,t,n,o){await this.nextNode(t,o,e)}}const r="core_begin";class s extends t{key(){return r}name(){return"Begin"}option(){return{onlyNode:!0,sort:0,dot:{left:0,top:0,right:1,bottom:0}}}async execute(e,t,n,o){await this.nextNode(t,o,e)}}class i extends t{key(){return"core_console"}name(){return"Console"}icon(){return'<i class="fas fa-terminal"></i>'}html({elNode:e,main:t,node:n}){return'<div class="pr10 pl10 pb4"><input type="text" class="node-form-control" node:model="message"/></div>'}properties(){return{message:{key:"message",edit:!0,default:""}}}async execute(e,t,n,o){console.log(n.getText(t?.message,e)),await this.nextNode(t,o,e)}}class a extends t{key(){return"core_delay"}name(){return"Delay"}icon(){return'<i class="fas fa-stopwatch"></i>'}html({elNode:e,main:t,node:n}){return'<div class="pr10 pl10 pb4 display-flex"><input type="text" class="node-form-control" node:model="number_delay"/><span class="p4">ms</span></div>'}properties(){return{number_delay:{key:"number_delay",edit:!0,default:1e3}}}async execute(e,t,n,o){await n.delay(n.runCode(t?.number_delay,e)),await this.nextNode(t,o,e)}}class d extends t{key(){return"core_end"}name(){return"End"}icon(){return'<i class="fas fa-stop"></i>'}option(){return{onlyNode:!0,sort:0,dot:{left:1,top:0,right:0,bottom:0}}}}class l extends t{key(){return"core_for"}name(){return"For"}icon(){return'<i class="fas fa-circle-notch"></i>'}properties(){return{number_start:{key:"number_start",edit:!0,default:1},number_end:{key:"number_end",edit:!0,default:10},number_step:{key:"number_step",edit:!0,default:1},env_name:{key:"env_name",edit:!0,default:"loop_index"}}}html({elNode:e,main:t,node:n}){return'\n      <div class="display-flex">\n        <div class="flex-none pl10 pr0 pt4 pb2 text-center" >For</div>\n        <div class="pl2 pr0 pt2 pb2" ><input type="text" class="node-form-control" node:model="number_start" /> </div>\n        <div class="flex-none pl2 pr0 pt4 pb2 text-center" >To </div>\n        <div class="pr2 pl0 pt2 pb2" ><input type="text" class="node-form-control" node:model="number_end" /></div>\n        <div class="flex-none pl2 pr0 pt42 pb2 text-center" >Step</div>\n        <div class="pr10 pl0 pt2 pb2" ><input type="text" class="node-form-control" node:model="number_step" /></div>\n      </div>\n      <div class="text-center p3">\n        <button class="btnGoGroup node-form-control">Go to Content</button>\n      </div>'}script({elNode:e,main:t,node:n}){e.querySelector(".btnGoGroup")?.addEventListener("click",(()=>{n.parent.openGroup(n.GetId())}));const o=`temp_${n.GetId()}_env_name`,r=t.temp.Get(o);r?n.data.Get("env_name")!=r&&(t.changeVariableName(r,n.data.Get("env_name"),n.GetId()),t.temp.Set(o,n.data.Get("env_name"))):(t.temp.Set(o,n.data.Get("env_name")),t.newVariable(n.data.Get("env_name"),n.GetId()))}async execute(e,t,n,o){const r=n.getGroupCurrent();n.setGroup(t.id);const s=+n.getText(t.number_start,e),i=+n.getText(t.number_end,e),a=+n.getText(t.number_step,e);for(let o=s;o<=i&&!n.flgStopping;o+=a)n.setVariableObject(t.env_name,o,e),await n.excuteAsync();n.setGroup(r),await this.nextNode(t,o,e)}}class c extends t{key(){return"core_group"}name(){return"Group"}icon(){return'<i class="far fa-object-group"></i>'}html({elNode:e,main:t,node:n}){return'<div class="text-center p3"><button class="btnGoGroup node-form-control">Go to Group</button></div>'}script({elNode:e,main:t,node:n}){e.querySelector(".btnGoGroup")?.addEventListener("click",(()=>{n.parent.openGroup(n.GetId())}))}async execute(e,t,n,o){const r=n.getGroupCurrent();n.setGroup(t.id),await n.excuteAsync(),n.setGroup(r),await this.nextNode(t,o,e)}}class p extends t{key(){return"core_if"}name(){return"If"}icon(){return'<i class="fas fa-equals"></i>'}properties(){return{condition:{key:"condition",edit:!0,default:1},cond:{key:"cond",edit:!0,sub:!0,default:1}}}option(){return{class:"",dot:{left:1,top:0,right:0,bottom:0}}}html({elNode:e,main:t,node:n}){const o=n.data.Get("condition");let r="";for(let e=0;e<o;e++)r=`${r}<div class="node-content-row">\n      <div class="pl10 pr1 pt2 pb2"><input type="text" class="node-form-control" node:model="cond${50001+e}"/></div>\n      <div style="text-align:right" class="pl1 pr10 pt2 pb2">Then</div>\n      <div><span class="node-dot" node="${50001+e}"></span></div>\n      </div>`;return r=`${r}<div class="node-content-row">\n    <div class="pl10 pr1 pt2 pb2"><button class="btnAddCondition">Add</button></div>\n    <div style="text-align:right" class="pl1 pr10 pt2 pb2">Else</div>\n    <div><span class="node-dot" node="50000"></span></div>\n    </div>`,r}script({elNode:e,main:t,node:n}){e.querySelector(".btnAddCondition")?.addEventListener("click",(()=>{n.data.Increase("condition")}))}async execute(e,t,n,o){const r=t.condition;for(let s=0;s<r&&!n.flgStopping;s++){let r=50001+s;const i=t[`cond${r}`];if(1==n.runCode(i,e))return void await this.nextNode(t,o,e,r)}await this.nextNode(t,o,e,5e4)}}class u extends t{key(){return"core_project"}name(){return"Project"}icon(){return'<i class="fas fa-project-diagram"></i>'}properties(){return{project:{key:"project",edit:!0,select:!0,dataSelect:({elNode:e,main:t,node:n})=>t.getProjectAll().map((e=>({value:e.Get("id"),text:e.Get("name")})))}}}html({elNode:e,main:t,node:n}){return'<div class="text-center p3"><select class="node-form-control" node:model="project"></select></div>'}script({elNode:e,main:t,node:n}){}async execute(e,t,n,o){const r=n.getProjectCurrent(),s=n.getGroupCurrent();n.setProject(t.project),await n.excuteAsync(),n.setProject(r),n.setGroup(s),await this.nextNode(t,o,e)}}class h extends t{key(){return"core_switch"}name(){return"Switch"}icon(){return'<i class="fas fa-random"></i>'}properties(){return{condition:{key:"condition",edit:!0,default:1},case:{key:"case",edit:!0,sub:!0,default:1},case_input:{key:"case_input",edit:!0,default:""}}}option(){return{class:"",dot:{left:1,top:0,right:0,bottom:0}}}html({elNode:e,main:t,node:n}){const o=n.data.Get("condition");let r="";r=`${r}<div class="node-content-row">\n    <div style="text-align:right" class="pl10 pr1 pt2 pb2">Input</div>\n    <div class="pl2 pr1 pt2 pb2"><input type="text" class="node-form-control" node:model="case_input"/></div>\n    <div></div>\n    </div>`;for(let e=0;e<o;e++)r=`${r}<div class="node-content-row">\n      <div style="text-align:right" class="pl10 pr1 pt2 pb2">Case</div>\n      <div class="pl2 pr1 pt2 pb2"><input type="text" class="node-form-control" node:model="case${50001+e}"/></div>\n      <div><span class="node-dot" node="${50001+e}"></span></div>\n      </div>`;return r=`${r}<div class="node-content-row">\n    <div class="pl10 pr1 pt2 pb2"><button class="btnAddCondition">Add</button></div>\n    <div style="text-align:right" class="pl2 pr10 pt2 pb2">Default</div>\n    <div><span class="node-dot" node="50000"></span></div>\n    </div>`,r}script({elNode:e,main:t,node:n}){e.querySelector(".btnAddCondition")?.addEventListener("click",(()=>{n.data.Increase("condition")}))}async execute(e,t,n,o){const r=t.condition,s=n.getText(t.case_input,e);for(let i=0;i<r&&!n.flgStopping;i++){let r=50001+i;const a=t[`case${r}`];if(n.getText(a,e)==s)return void await this.nextNode(t,o,e,r)}await this.nextNode(t,o,e,5e4)}}class m extends class{nodes(){return[]}newNodes(){return this.nodes().map((e=>new e))}}{nodes(){return[s,d,o,a,p,h,l,n,i,u,c]}}class v{runCodeInBrowser(e,t){return window.eval(this.GetTextInBrowser(e,t))}GetTextInBrowser(e,t){let n="",o=[];t||(t={});for(let e of Object.keys(t))n=""!=n?`${n},${e}`:e,o=[...o,t[e]];return window.eval("(("+n+")=>(`"+e+"`))")(...o)}GetTextInNode(e,t){return""}runCodeInNode(e,t){const{VM:n}=require("vm2");return(new n).runInContext(e,t)}runCode(e,t){return null!=window&&null!=document?this.runCodeInBrowser(e,t):this.runCodeInNode(e,t)}getText(e,t){return null!=window&&null!=document?this.GetTextInBrowser(e,t):this.GetTextInNode(e,t)}}const f="main_project",y="main_solution";class g{events={};scriptCode=new v;variableValue={};onSafe(e,t){this.removeListener(e,t),this.on(e,t)}on(e,t){return"function"!=typeof t?(console.error("The listener callback must be a function, the given type is "+typeof t),!1):"string"!=typeof e?(console.error("The event name must be a string, the given type is "+typeof e),!1):(void 0===this.events[e]&&(this.events[e]={listeners:[]}),void this.events[e].listeners.push(t))}removeListener(e,t){if(!this.events[e])return!1;const n=this.events[e].listeners,o=n.indexOf(t);o>-1&&n.splice(o,1)}dispatch(e,t){if(void 0===this.events[e])return!1;this.events[e].listeners.forEach((e=>{e(t)}))}$data;$nodes=[];$project;$group="root";delay_time=100;constructor(e=null){this.LoadData(e)}setProject(e){if(this.$project=e,this.$group="root",void 0===this.variableValue[this.$project]){let e=this.getProjectById(this.$project);this.variableValue[this.$project]=e.variable.map((e=>({...e,value:e.initalValue})))}}getProjectById(e){return this.$data?.projects?.find((t=>t.id==e))}getProject(){return this.$data.key===y?this.getProjectById(this.$project):this.$data.key===f?this.$data:void 0}setGroup(e){this.$group=e}getGroupCurrent(){return this.$group}getProjectCurrent(){return this.$project}getNodeInGroup(e=null){let t=e??this.$group;return this.getProject()?.nodes?.filter((e=>e.group==t))}getNodeById(e){return this.getNodeInGroup()?.filter((t=>t.id==e))?.[0]}getNodeByKey(e){return this.getNodeInGroup()?.filter((t=>t.key==e))?.[0]}LoadData(e){return e?(this.variableValue={},this.$data="string"==typeof e?JSON.parse(e):e,this.$data.key===y&&(this.$project=this.$data.project),this.$project||(this.$project=this.$data.projects?.[0]?.id),this.setProject(this.$project),this):this}newSetup(e){this.Setup(new e)}Setup(e){this.$nodes=[...this.$nodes,...e.newNodes()]}getControlNodes(){return this.$nodes.map((e=>({key:"",name:"",group:"",html:"",script:"",properties:"",dot:{left:1,top:0,right:1,bottom:0},...e.option()??{},key:e.key(),name:e.name(),icon:e.icon(),group:e.group(),html:e.html,script:e.script,properties:e.properties()??{}})))}getWorkerNode(e){return this.$nodes?.filter((t=>t.checkKey(e)))?.[0]}async excuteNode(e){const t=this.getNodeById(e);await this.excuteDataNode(t)}delay(e=100){return new Promise((t=>setTimeout(t,e)))}async excuteDataNode(e){if(this.flgStopping)this.dispatch("worker_stopping",{});else if(await this.delay(this.delay_time),e){this.dispatch("node_start",{node:e});const t=this.getWorkerNode(e.key);await(t?.execute(e.id,e,this,this.excuteNode.bind(this))),this.dispatch("node_end",{node:e})}}async excuteAsync(){const e=this.getNodeByKey("core_begin");await this.excuteDataNode(e)}excute(){setTimeout((async()=>{this.dispatch("worker_start",{});try{this.flgStopping=!1,await this.excuteAsync(),this.flgStopping=!1,this.dispatch("worker_end",{})}catch(e){console.log(e),this.dispatch("worker_end",{})}this.flgStopping=!1}))}flgStopping=null;stop(){this.flgStopping=!0}setVariableObject(e,t,n,o=null){let r=[n];for(;"root"!=n;){let e=this.getNodeById(n);e?(n=e.group,r=[...r,n]):(n="root",r=[...r,n])}let s=this.variableValue[o??this.$project];const i=r.length-1;for(let n=0;n<=i;n++){let o=s.filter((t=>t.scope===r[n]&&t.name==e))?.[0];if(o)return void(o.value=t)}}getVariableObject(e,t=null){const n={};let o=[e];for(;"root"!=e;){let t=this.getNodeById(e);t?(e=t.group,o=[...o,e]):(e="root",o=[...o,e])}let r=this.variableValue[t??this.$project];for(let e=o.length-1;e>=0;e--)r.filter((t=>t.scope===o[e]))?.forEach((e=>{n[e.name]=e.value}));return n}runCode(e,t){const n=this.getVariableObject(t);return this.scriptCode.runCode(e,n)}getText(e,t){const n=this.getVariableObject(t);return this.scriptCode.getText(e,n)}}const x=new g;return x.newSetup(m),{CoreSetup:m,WorkerManager:g,workerManager:x}}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmlzdWFsZmxvdy1jb3JlLm1pbi5qcyIsInNvdXJjZXMiOlsiLi4vc3JjL3dvcmtlci9ub2RlLnRzIiwiLi4vc3JjL25vZGVzL2FsZXJ0LnRzIiwiLi4vc3JjL25vZGVzL2Fzc2lnbi50cyIsIi4uL3NyYy9ub2Rlcy9iZWdpbi50cyIsIi4uL3NyYy9ub2Rlcy9jb25zb2xlLnRzIiwiLi4vc3JjL25vZGVzL2RlbGF5LnRzIiwiLi4vc3JjL25vZGVzL2VuZC50cyIsIi4uL3NyYy9ub2Rlcy9mb3IudHMiLCIuLi9zcmMvbm9kZXMvZ3JvdXAudHMiLCIuLi9zcmMvbm9kZXMvaWYudHMiLCIuLi9zcmMvbm9kZXMvcHJvamVjdC50cyIsIi4uL3NyYy9ub2Rlcy9zd2l0Y2gudHMiLCIuLi9zcmMvbm9kZXMvaW5kZXgudHMiLCIuLi9zcmMvd29ya2VyL3NldHVwLnRzIiwiLi4vc3JjL3dvcmtlci9zY3JpcHQudHMiLCIuLi9zcmMvd29ya2VyL21hbmFnZXIudHMiLCIuLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV29ya2VyTWFuYWdlciB9IGZyb20gXCIuL21hbmFnZXJcIjtcblxuZXhwb3J0IGVudW0gRW52Tm9kZSB7XG4gIEFsbCA9IDAsXG4gIFdlYiA9IDEsXG4gIFBDID0gMixcbiAgQ2xvdWQgPSAzLFxuICBNb2JpbGUgPSA0LFxuICBJT1MgPSA1LFxuICBBbmRyb2lkID0gNlxufVxuZXhwb3J0IHR5cGUgT3B0aW9uTm9kZSA9IHZvaWQgJiB7XG4gIGtleTogXCJcIixcbiAgbmFtZTogXCJcIixcbiAgZ3JvdXA6IFwiXCIsXG4gIGh0bWw6IFwiXCIsXG4gIHNjcmlwdDogXCJcIixcbiAgcHJvcGVydGllczogXCJcIixcbiAgb25seU5vZGU6IGJvb2xlYW4sXG4gIGRvdDoge1xuICAgIGxlZnQ6IDEsXG4gICAgdG9wOiAwLFxuICAgIHJpZ2h0OiAxLFxuICAgIGJvdHRvbTogMCxcbiAgfVxufVxuZXhwb3J0IGNsYXNzIFdvcmtlck5vZGUge1xuICBlbnYoKTogYW55W10ge1xuICAgIHJldHVybiBbRW52Tm9kZS5BbGwsIEVudk5vZGUuQ2xvdWQsIEVudk5vZGUuUEMsIEVudk5vZGUuV2ViLCBFbnZOb2RlLk1vYmlsZSwgRW52Tm9kZS5JT1MsIEVudk5vZGUuQW5kcm9pZF07XG4gIH1cbiAgcHVibGljIENoZWNrRW52KGVudjogYW55KSB7XG4gICAgcmV0dXJuIHRoaXMuZW52KCkuaW5jbHVkZXMoZW52KTtcbiAgfVxuICBrZXkoKTogYW55IHtcbiAgICByZXR1cm4gdGhpcy5jb25zdHJ1Y3Rvci5uYW1lO1xuICB9XG4gIHB1YmxpYyBjaGVja0tleShrZXk6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmtleSgpID09IGtleTtcbiAgfVxuICBuYW1lKCk6IGFueSB7IHJldHVybiB0aGlzLmNvbnN0cnVjdG9yLm5hbWU7IH1cbiAgaWNvbigpOiBhbnkgeyByZXR1cm4gJzxpIGNsYXNzPVwiZmFzIGZhLXBsYXlcIj48L2k+JzsgfVxuICBncm91cCgpOiBhbnkge1xuICAgIHJldHVybiBcIkNvbW1vblwiO1xuICB9XG4gIGh0bWwoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KSB7XG4gICAgcmV0dXJuIGBgO1xuICB9XG4gIHNjcmlwdCh7IGVsTm9kZSwgbWFpbiwgbm9kZSB9OiBhbnkpIHsgfVxuICBwcm9wZXJ0aWVzKCk6IGFueSB7IH1cbiAgb3B0aW9uKCk6IGFueSB7IH1cbiAgYXN5bmMgZXhlY3V0ZShub2RlSWQ6IGFueSwgZGF0YTogYW55LCBtYW5hZ2VyOiBXb3JrZXJNYW5hZ2VyLCBuZXh0OiBhbnkpIHtcblxuICB9XG4gIHByb3RlY3RlZCBhc3luYyBuZXh0Tm9kZShkYXRhOiBhbnksIG5leHQ6IGFueSwgbm9kZUlkOiBhbnksIGluZGV4OiBhbnkgPSBudWxsKSB7XG4gICAgaWYgKGRhdGE/LmxpbmVzKSB7XG4gICAgICBmb3IgKGxldCBpdGVtIG9mIGRhdGEubGluZXMpIHtcbiAgICAgICAgaWYgKGl0ZW0uZnJvbSA9PSBub2RlSWQgJiYgKGluZGV4ID09IG51bGwgfHwgaXRlbS5mcm9tSW5kZXggPT0gaW5kZXgpKSB7XG4gICAgICAgICAgYXdhaXQgbmV4dChpdGVtLnRvKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfVxufVxuIiwiaW1wb3J0IHsgV29ya2VyTWFuYWdlciB9IGZyb20gXCIuLi93b3JrZXIvbWFuYWdlclwiO1xuaW1wb3J0IHsgV29ya2VyTm9kZSB9IGZyb20gXCIuLi93b3JrZXIvbm9kZVwiO1xuXG5leHBvcnQgY2xhc3MgQ29yZUFsZXJ0Tm9kZSBleHRlbmRzIFdvcmtlck5vZGUge1xuICBrZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjb3JlX2FsZXJ0XCI7XG4gIH1cbiAgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJBbGVydFwiO1xuICB9XG4gIGljb24oKSB7XG4gICAgcmV0dXJuICc8aSBjbGFzcz1cImZhcyBmYS1iZWxsXCI+PC9pPic7XG4gIH1cbiAgaHRtbCh7IGVsTm9kZSwgbWFpbiwgbm9kZSB9OiBhbnkpOiBzdHJpbmcge1xuICAgIHJldHVybiAnPGRpdiBjbGFzcz1cInByMTAgcGwxMCBwYjRcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm5vZGUtZm9ybS1jb250cm9sXCIgbm9kZTptb2RlbD1cIm1lc3NhZ2VcIi8+PC9kaXY+JztcbiAgfVxuICBwcm9wZXJ0aWVzKCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG1lc3NhZ2U6IHtcbiAgICAgICAga2V5OiBcIm1lc3NhZ2VcIixcbiAgICAgICAgZWRpdDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogXCIke0RhdGUoKX1cIlxuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuICAgIGFsZXJ0KG1hbmFnZXIuZ2V0VGV4dChkYXRhPy5tZXNzYWdlLCBub2RlSWQpKTtcbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck1hbmFnZXIgfSBmcm9tIFwiLi4vd29ya2VyL21hbmFnZXJcIjtcbmltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi4vd29ya2VyL25vZGVcIjtcblxuZXhwb3J0IGNsYXNzIENvcmVBc3NpZ25Ob2RlIGV4dGVuZHMgV29ya2VyTm9kZSB7XG4gIGtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNvcmVfYXNzaWduXCI7XG4gIH1cbiAgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJBc3NpZ25cIjtcbiAgfVxuICBpY29uKCkge1xuICAgIHJldHVybiAnPGkgY2xhc3M9XCJmYXMgZmEtYm9sdFwiPjwvaT4nO1xuICB9XG4gIHByb3BlcnRpZXMoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgZW52X25hbWU6IHtcbiAgICAgICAga2V5OiBcImVudl9uYW1lXCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IFwiXCJcbiAgICAgIH0sXG4gICAgICBlbnZfdmFsdWU6IHtcbiAgICAgICAga2V5OiBcImVudl92YWx1ZVwiLFxuICAgICAgICBlZGl0OiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiBcIlwiXG4gICAgICB9XG4gICAgfVxuICB9XG4gIG9wdGlvbigpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBjbGFzczogJycsXG4gICAgICBkb3Q6IHtcbiAgICAgICAgbGVmdDogMSxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGh0bWwoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYDxkaXYgY2xhc3M9XCJub2RlLWNvbnRlbnQtcm93XCI+XG4gICAgPGRpdiBjbGFzcz1cInBsMTAgcHIwIHB0MiBwYjJcIj48aW5wdXQgdHlwZT1cInRleHRcIiBjbGFzcz1cIm5vZGUtZm9ybS1jb250cm9sXCIgbm9kZTptb2RlbD1cImVudl9uYW1lXCIvPiA8L2Rpdj5cbiAgICA8ZGl2IGNsYXNzPVwiZmxleC1ub25lIHAyIHRleHQtY2VudGVyXCI+PTwvZGl2PlxuICAgIDxkaXYgY2xhc3M9XCJwcjEwIHBsMCBwdDIgcGIyXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJlbnZfdmFsdWVcIi8+PC9kaXY+XG4gICAgPGRpdj48c3BhbiBjbGFzcz1cIm5vZGUtZG90XCIgbm9kZT1cIjUwMDAwXCI+PC9zcGFuPjwvZGl2PlxuICAgIDwvZGl2PmA7XG4gIH1cbiAgYXN5bmMgZXhlY3V0ZShub2RlSWQ6IGFueSwgZGF0YTogYW55LCBtYW5hZ2VyOiBXb3JrZXJNYW5hZ2VyLCBuZXh0OiBhbnkpIHtcbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck1hbmFnZXIgfSBmcm9tIFwiLi4vd29ya2VyL21hbmFnZXJcIjtcbmltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi4vd29ya2VyL25vZGVcIjtcbmV4cG9ydCBjb25zdCBOb2RlQmVnaW4gPSBcImNvcmVfYmVnaW5cIjtcbmV4cG9ydCBjbGFzcyBDb3JlQmVnaW5Ob2RlIGV4dGVuZHMgV29ya2VyTm9kZSB7XG5cbiAga2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIE5vZGVCZWdpbjtcbiAgfVxuICBuYW1lKCkge1xuICAgIHJldHVybiBcIkJlZ2luXCI7XG4gIH1cbiAgb3B0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbmx5Tm9kZTogdHJ1ZSxcbiAgICAgIHNvcnQ6IDAsXG4gICAgICBkb3Q6IHtcbiAgICAgICAgbGVmdDogMCxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICByaWdodDogMSxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgfVxuICAgIH07XG4gIH1cbiAgYXN5bmMgZXhlY3V0ZShub2RlSWQ6IGFueSwgZGF0YTogYW55LCBtYW5hZ2VyOiBXb3JrZXJNYW5hZ2VyLCBuZXh0OiBhbnkpIHtcbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck1hbmFnZXIgfSBmcm9tIFwiLi4vd29ya2VyL21hbmFnZXJcIjtcbmltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi4vd29ya2VyL25vZGVcIjtcblxuZXhwb3J0IGNsYXNzIENvcmVDb25zb2xlTm9kZSBleHRlbmRzIFdvcmtlck5vZGUge1xuICBrZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjb3JlX2NvbnNvbGVcIjtcbiAgfVxuICBuYW1lKCkge1xuICAgIHJldHVybiBcIkNvbnNvbGVcIjtcbiAgfVxuICBpY29uKCkge1xuICAgIHJldHVybiAnPGkgY2xhc3M9XCJmYXMgZmEtdGVybWluYWxcIj48L2k+JztcbiAgfVxuICBodG1sKHsgZWxOb2RlLCBtYWluLCBub2RlIH06IGFueSk6IHN0cmluZyB7XG4gICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwicHIxMCBwbDEwIHBiNFwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibm9kZS1mb3JtLWNvbnRyb2xcIiBub2RlOm1vZGVsPVwibWVzc2FnZVwiLz48L2Rpdj4nO1xuICB9XG4gIHByb3BlcnRpZXMoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgbWVzc2FnZToge1xuICAgICAgICBrZXk6IFwibWVzc2FnZVwiLFxuICAgICAgICBlZGl0OiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiBcIlwiXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGFzeW5jIGV4ZWN1dGUobm9kZUlkOiBhbnksIGRhdGE6IGFueSwgbWFuYWdlcjogV29ya2VyTWFuYWdlciwgbmV4dDogYW55KSB7XG4gICAgY29uc29sZS5sb2cobWFuYWdlci5nZXRUZXh0KGRhdGE/Lm1lc3NhZ2Usbm9kZUlkKSk7XG4gICAgYXdhaXQgdGhpcy5uZXh0Tm9kZShkYXRhLCBuZXh0LCBub2RlSWQpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBXb3JrZXJNYW5hZ2VyIH0gZnJvbSBcIi4uL3dvcmtlci9tYW5hZ2VyXCI7XG5pbXBvcnQgeyBXb3JrZXJOb2RlIH0gZnJvbSBcIi4uL3dvcmtlci9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3JlRGVsYXlOb2RlIGV4dGVuZHMgV29ya2VyTm9kZSB7XG4gIGtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNvcmVfZGVsYXlcIjtcbiAgfVxuICBuYW1lKCkge1xuICAgIHJldHVybiBcIkRlbGF5XCI7XG4gIH1cbiAgaWNvbigpIHtcbiAgICByZXR1cm4gJzxpIGNsYXNzPVwiZmFzIGZhLXN0b3B3YXRjaFwiPjwvaT4nO1xuICB9XG4gIGh0bWwoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJwcjEwIHBsMTAgcGI0IGRpc3BsYXktZmxleFwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibm9kZS1mb3JtLWNvbnRyb2xcIiBub2RlOm1vZGVsPVwibnVtYmVyX2RlbGF5XCIvPjxzcGFuIGNsYXNzPVwicDRcIj5tczwvc3Bhbj48L2Rpdj4nO1xuICB9XG4gIHByb3BlcnRpZXMoKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgbnVtYmVyX2RlbGF5OiB7XG4gICAgICAgIGtleTogXCJudW1iZXJfZGVsYXlcIixcbiAgICAgICAgZWRpdDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogMTAwMFxuICAgICAgfVxuICAgIH1cbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuICAgIGF3YWl0IG1hbmFnZXIuZGVsYXkobWFuYWdlci5ydW5Db2RlKGRhdGE/Lm51bWJlcl9kZWxheSxub2RlSWQpKTtcbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi4vd29ya2VyL25vZGVcIjtcblxuZXhwb3J0IGNsYXNzIENvcmVFbmROb2RlIGV4dGVuZHMgV29ya2VyTm9kZSB7XG4gIGtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBcImNvcmVfZW5kXCI7XG4gIH1cbiAgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJFbmRcIjtcbiAgfVxuICBpY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICc8aSBjbGFzcz1cImZhcyBmYS1zdG9wXCI+PC9pPic7XG4gIH1cbiAgb3B0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvbmx5Tm9kZTogdHJ1ZSxcbiAgICAgIHNvcnQ6IDAsXG4gICAgICBkb3Q6IHtcbiAgICAgICAgbGVmdDogMSxcbiAgICAgICAgdG9wOiAwLFxuICAgICAgICByaWdodDogMCxcbiAgICAgICAgYm90dG9tOiAwLFxuICAgICAgfVxuICAgIH07XG4gIH1cblxufVxuIiwiaW1wb3J0IHsgV29ya2VyTWFuYWdlciB9IGZyb20gXCIuLi93b3JrZXIvbWFuYWdlclwiO1xuaW1wb3J0IHsgV29ya2VyTm9kZSB9IGZyb20gXCIuLi93b3JrZXIvbm9kZVwiO1xuXG5leHBvcnQgY2xhc3MgQ29yZUZvck5vZGUgZXh0ZW5kcyBXb3JrZXJOb2RlIHtcbiAga2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY29yZV9mb3JcIjtcbiAgfVxuICBuYW1lKCkge1xuICAgIHJldHVybiBcIkZvclwiO1xuICB9XG4gIGljb24oKSB7XG4gICAgcmV0dXJuICc8aSBjbGFzcz1cImZhcyBmYS1jaXJjbGUtbm90Y2hcIj48L2k+JztcbiAgfVxuICBwcm9wZXJ0aWVzKCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG51bWJlcl9zdGFydDoge1xuICAgICAgICBrZXk6IFwibnVtYmVyX3N0YXJ0XCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDFcbiAgICAgIH0sXG4gICAgICBudW1iZXJfZW5kOiB7XG4gICAgICAgIGtleTogXCJudW1iZXJfZW5kXCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDEwXG4gICAgICB9LFxuICAgICAgbnVtYmVyX3N0ZXA6IHtcbiAgICAgICAga2V5OiBcIm51bWJlcl9zdGVwXCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDFcbiAgICAgIH0sXG4gICAgICBlbnZfbmFtZToge1xuICAgICAgICBrZXk6IFwiZW52X25hbWVcIixcbiAgICAgICAgZWRpdDogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogJ2xvb3BfaW5kZXgnXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGh0bWwoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gYFxuICAgICAgPGRpdiBjbGFzcz1cImRpc3BsYXktZmxleFwiPlxuICAgICAgICA8ZGl2IGNsYXNzPVwiZmxleC1ub25lIHBsMTAgcHIwIHB0NCBwYjIgdGV4dC1jZW50ZXJcIiA+Rm9yPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwbDIgcHIwIHB0MiBwYjJcIiA+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJudW1iZXJfc3RhcnRcIiAvPiA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtbm9uZSBwbDIgcHIwIHB0NCBwYjIgdGV4dC1jZW50ZXJcIiA+VG8gPC9kaXY+XG4gICAgICAgIDxkaXYgY2xhc3M9XCJwcjIgcGwwIHB0MiBwYjJcIiA+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJudW1iZXJfZW5kXCIgLz48L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cImZsZXgtbm9uZSBwbDIgcHIwIHB0NDIgcGIyIHRleHQtY2VudGVyXCIgPlN0ZXA8L2Rpdj5cbiAgICAgICAgPGRpdiBjbGFzcz1cInByMTAgcGwwIHB0MiBwYjJcIiA+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJudW1iZXJfc3RlcFwiIC8+PC9kaXY+XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBwM1wiPlxuICAgICAgICA8YnV0dG9uIGNsYXNzPVwiYnRuR29Hcm91cCBub2RlLWZvcm0tY29udHJvbFwiPkdvIHRvIENvbnRlbnQ8L2J1dHRvbj5cbiAgICAgIDwvZGl2PmA7XG4gIH1cbiAgc2NyaXB0KHsgZWxOb2RlLCBtYWluLCBub2RlIH06IGFueSk6IHZvaWQge1xuICAgIGVsTm9kZS5xdWVyeVNlbGVjdG9yKCcuYnRuR29Hcm91cCcpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG5vZGUucGFyZW50Lm9wZW5Hcm91cChub2RlLkdldElkKCkpO1xuICAgIH0pXG4gICAgY29uc3QgdGVtcF9lbnZfbmFtZSA9IGB0ZW1wXyR7bm9kZS5HZXRJZCgpfV9lbnZfbmFtZWA7XG4gICAgY29uc3QgdGVtcF92YWx1ZSA9IG1haW4udGVtcC5HZXQodGVtcF9lbnZfbmFtZSk7XG4gICAgaWYgKCF0ZW1wX3ZhbHVlKSB7XG4gICAgICBtYWluLnRlbXAuU2V0KHRlbXBfZW52X25hbWUsIG5vZGUuZGF0YS5HZXQoJ2Vudl9uYW1lJykpO1xuICAgICAgbWFpbi5uZXdWYXJpYWJsZShub2RlLmRhdGEuR2V0KCdlbnZfbmFtZScpLCBub2RlLkdldElkKCkpO1xuICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhLkdldCgnZW52X25hbWUnKSAhPSB0ZW1wX3ZhbHVlKSB7XG4gICAgICBtYWluLmNoYW5nZVZhcmlhYmxlTmFtZSh0ZW1wX3ZhbHVlLCBub2RlLmRhdGEuR2V0KCdlbnZfbmFtZScpLCBub2RlLkdldElkKCkpO1xuICAgICAgbWFpbi50ZW1wLlNldCh0ZW1wX2Vudl9uYW1lLCBub2RlLmRhdGEuR2V0KCdlbnZfbmFtZScpKTtcbiAgICB9XG5cbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuICAgIGNvbnN0IGdyb3VwID0gbWFuYWdlci5nZXRHcm91cEN1cnJlbnQoKTtcbiAgICBtYW5hZ2VyLnNldEdyb3VwKGRhdGEuaWQpO1xuICAgIGNvbnN0IG51bWJlcl9zdGFydCA9ICttYW5hZ2VyLmdldFRleHQoZGF0YS5udW1iZXJfc3RhcnQsIG5vZGVJZCk7XG4gICAgY29uc3QgbnVtYmVyX2VuZCA9ICttYW5hZ2VyLmdldFRleHQoZGF0YS5udW1iZXJfZW5kLCBub2RlSWQpO1xuICAgIGNvbnN0IG51bWJlcl9zdGVwID0gK21hbmFnZXIuZ2V0VGV4dChkYXRhLm51bWJlcl9zdGVwLCBub2RlSWQpO1xuXG4gICAgZm9yIChsZXQgbG9vcF9pbmRleCA9IG51bWJlcl9zdGFydDsgbG9vcF9pbmRleCA8PSBudW1iZXJfZW5kICYmICFtYW5hZ2VyLmZsZ1N0b3BwaW5nOyBsb29wX2luZGV4ID0gbG9vcF9pbmRleCArIG51bWJlcl9zdGVwKSB7XG4gICAgICBtYW5hZ2VyLnNldFZhcmlhYmxlT2JqZWN0KGRhdGEuZW52X25hbWUsIGxvb3BfaW5kZXgsIG5vZGVJZCk7XG4gICAgICBhd2FpdCBtYW5hZ2VyLmV4Y3V0ZUFzeW5jKCk7XG4gICAgfVxuICAgIG1hbmFnZXIuc2V0R3JvdXAoZ3JvdXApO1xuICAgIGF3YWl0IHRoaXMubmV4dE5vZGUoZGF0YSwgbmV4dCwgbm9kZUlkKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgV29ya2VyTWFuYWdlciB9IGZyb20gXCIuLi93b3JrZXIvbWFuYWdlclwiO1xuaW1wb3J0IHsgV29ya2VyTm9kZSB9IGZyb20gXCIuLi93b3JrZXIvbm9kZVwiO1xuXG5leHBvcnQgY2xhc3MgQ29yZUdyb3VwTm9kZSBleHRlbmRzIFdvcmtlck5vZGUge1xuICBrZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjb3JlX2dyb3VwXCI7XG4gIH1cbiAgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJHcm91cFwiO1xuICB9XG4gIGljb24oKSB7XG4gICAgcmV0dXJuICc8aSBjbGFzcz1cImZhciBmYS1vYmplY3QtZ3JvdXBcIj48L2k+JztcbiAgfVxuICBodG1sKHsgZWxOb2RlLCBtYWluLCBub2RlIH06IGFueSk6IHN0cmluZyB7XG4gICAgcmV0dXJuICc8ZGl2IGNsYXNzPVwidGV4dC1jZW50ZXIgcDNcIj48YnV0dG9uIGNsYXNzPVwiYnRuR29Hcm91cCBub2RlLWZvcm0tY29udHJvbFwiPkdvIHRvIEdyb3VwPC9idXR0b24+PC9kaXY+JztcbiAgfVxuICBzY3JpcHQoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogdm9pZCB7XG4gICAgZWxOb2RlLnF1ZXJ5U2VsZWN0b3IoJy5idG5Hb0dyb3VwJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbm9kZS5wYXJlbnQub3Blbkdyb3VwKG5vZGUuR2V0SWQoKSk7XG4gICAgfSlcbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuICAgIGNvbnN0IGdyb3VwID0gbWFuYWdlci5nZXRHcm91cEN1cnJlbnQoKTtcbiAgICBtYW5hZ2VyLnNldEdyb3VwKGRhdGEuaWQpO1xuICAgIGF3YWl0IG1hbmFnZXIuZXhjdXRlQXN5bmMoKTtcbiAgICBtYW5hZ2VyLnNldEdyb3VwKGdyb3VwKTtcbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCk7XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck1hbmFnZXIgfSBmcm9tIFwiLi4vd29ya2VyL21hbmFnZXJcIjtcbmltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi4vd29ya2VyL25vZGVcIjtcblxuZXhwb3J0IGNsYXNzIENvcmVJZk5vZGUgZXh0ZW5kcyBXb3JrZXJOb2RlIHtcbiAga2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY29yZV9pZlwiO1xuICB9XG4gIG5hbWUoKSB7XG4gICAgcmV0dXJuIFwiSWZcIjtcbiAgfVxuICBpY29uKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICc8aSBjbGFzcz1cImZhcyBmYS1lcXVhbHNcIj48L2k+JztcbiAgfVxuICBwcm9wZXJ0aWVzKCk6IGFueSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbmRpdGlvbjoge1xuICAgICAgICBrZXk6IFwiY29uZGl0aW9uXCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDFcbiAgICAgIH0sXG4gICAgICBjb25kOiB7XG4gICAgICAgIGtleTogXCJjb25kXCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIHN1YjogdHJ1ZSxcbiAgICAgICAgZGVmYXVsdDogMVxuICAgICAgfVxuICAgIH1cbiAgfVxuICBvcHRpb24oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3M6ICcnLFxuICAgICAgZG90OiB7XG4gICAgICAgIGxlZnQ6IDEsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaHRtbCh7IGVsTm9kZSwgbWFpbiwgbm9kZSB9OiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5vZGUuZGF0YS5HZXQoJ2NvbmRpdGlvbicpO1xuICAgIGxldCBodG1sID0gJyc7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvbmRpdGlvbjsgaW5kZXgrKykge1xuICAgICAgaHRtbCA9IGAke2h0bWx9PGRpdiBjbGFzcz1cIm5vZGUtY29udGVudC1yb3dcIj5cbiAgICAgIDxkaXYgY2xhc3M9XCJwbDEwIHByMSBwdDIgcGIyXCI+PGlucHV0IHR5cGU9XCJ0ZXh0XCIgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJjb25kJHs1MDAwMSArIGluZGV4fVwiLz48L2Rpdj5cbiAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOnJpZ2h0XCIgY2xhc3M9XCJwbDEgcHIxMCBwdDIgcGIyXCI+VGhlbjwvZGl2PlxuICAgICAgPGRpdj48c3BhbiBjbGFzcz1cIm5vZGUtZG90XCIgbm9kZT1cIiR7NTAwMDEgKyBpbmRleH1cIj48L3NwYW4+PC9kaXY+XG4gICAgICA8L2Rpdj5gO1xuICAgIH1cbiAgICBodG1sID0gYCR7aHRtbH08ZGl2IGNsYXNzPVwibm9kZS1jb250ZW50LXJvd1wiPlxuICAgIDxkaXYgY2xhc3M9XCJwbDEwIHByMSBwdDIgcGIyXCI+PGJ1dHRvbiBjbGFzcz1cImJ0bkFkZENvbmRpdGlvblwiPkFkZDwvYnV0dG9uPjwvZGl2PlxuICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOnJpZ2h0XCIgY2xhc3M9XCJwbDEgcHIxMCBwdDIgcGIyXCI+RWxzZTwvZGl2PlxuICAgIDxkaXY+PHNwYW4gY2xhc3M9XCJub2RlLWRvdFwiIG5vZGU9XCI1MDAwMFwiPjwvc3Bhbj48L2Rpdj5cbiAgICA8L2Rpdj5gO1xuICAgIHJldHVybiBodG1sO1xuICB9XG4gIHNjcmlwdCh7IGVsTm9kZSwgbWFpbiwgbm9kZSB9OiBhbnkpOiB2b2lkIHtcbiAgICBlbE5vZGUucXVlcnlTZWxlY3RvcignLmJ0bkFkZENvbmRpdGlvbicpPy5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIG5vZGUuZGF0YS5JbmNyZWFzZSgnY29uZGl0aW9uJyk7XG4gICAgfSlcbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuXG4gICAgY29uc3QgY29uZGl0aW9uID0gZGF0YS5jb25kaXRpb247XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvbmRpdGlvbiAmJiAhbWFuYWdlci5mbGdTdG9wcGluZzsgaW5kZXgrKykge1xuICAgICAgbGV0IG5vZGUgPSA1MDAwMSArIGluZGV4O1xuICAgICAgY29uc3QgY29uZGl0aW9uX25vZGUgPSBkYXRhW2Bjb25kJHtub2RlfWBdO1xuICAgICAgaWYgKG1hbmFnZXIucnVuQ29kZShjb25kaXRpb25fbm9kZSwgbm9kZUlkKSA9PSB0cnVlKSB7XG4gICAgICAgIGF3YWl0IHRoaXMubmV4dE5vZGUoZGF0YSwgbmV4dCwgbm9kZUlkLCBub2RlKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCwgNTAwMDApO1xuICB9XG59XG4iLCJpbXBvcnQgeyBXb3JrZXJNYW5hZ2VyIH0gZnJvbSBcIi4uL3dvcmtlci9tYW5hZ2VyXCI7XG5pbXBvcnQgeyBXb3JrZXJOb2RlIH0gZnJvbSBcIi4uL3dvcmtlci9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3JlUHJvamVjdE5vZGUgZXh0ZW5kcyBXb3JrZXJOb2RlIHtcbiAga2V5KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIFwiY29yZV9wcm9qZWN0XCI7XG4gIH1cbiAgbmFtZSgpIHtcbiAgICByZXR1cm4gXCJQcm9qZWN0XCI7XG4gIH1cbiAgaWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnPGkgY2xhc3M9XCJmYXMgZmEtcHJvamVjdC1kaWFncmFtXCI+PC9pPic7XG4gIH1cbiAgcHJvcGVydGllcygpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBwcm9qZWN0OiB7XG4gICAgICAgIGtleTogXCJwcm9qZWN0XCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIHNlbGVjdDogdHJ1ZSxcbiAgICAgICAgZGF0YVNlbGVjdDogKHsgZWxOb2RlLCBtYWluLCBub2RlIH06IGFueSkgPT4ge1xuICAgICAgICAgIHJldHVybiBtYWluLmdldFByb2plY3RBbGwoKS5tYXAoKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdmFsdWU6IGl0ZW0uR2V0KCdpZCcpLFxuICAgICAgICAgICAgICB0ZXh0OiBpdGVtLkdldCgnbmFtZScpXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgIH0sXG4gICAgICB9XG4gICAgfVxuICB9XG4gIGh0bWwoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogc3RyaW5nIHtcbiAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJ0ZXh0LWNlbnRlciBwM1wiPjxzZWxlY3QgY2xhc3M9XCJub2RlLWZvcm0tY29udHJvbFwiIG5vZGU6bW9kZWw9XCJwcm9qZWN0XCI+PC9zZWxlY3Q+PC9kaXY+JztcbiAgfVxuICBzY3JpcHQoeyBlbE5vZGUsIG1haW4sIG5vZGUgfTogYW55KTogdm9pZCB7XG5cbiAgfVxuICBhc3luYyBleGVjdXRlKG5vZGVJZDogYW55LCBkYXRhOiBhbnksIG1hbmFnZXI6IFdvcmtlck1hbmFnZXIsIG5leHQ6IGFueSkge1xuICAgIGNvbnN0IHByb2plY3QgPSBtYW5hZ2VyLmdldFByb2plY3RDdXJyZW50KCk7XG4gICAgY29uc3QgZ3JvdXAgPSBtYW5hZ2VyLmdldEdyb3VwQ3VycmVudCgpO1xuICAgIG1hbmFnZXIuc2V0UHJvamVjdChkYXRhLnByb2plY3QpO1xuICAgIGF3YWl0IG1hbmFnZXIuZXhjdXRlQXN5bmMoKTtcbiAgICBtYW5hZ2VyLnNldFByb2plY3QocHJvamVjdCk7XG4gICAgbWFuYWdlci5zZXRHcm91cChncm91cCk7XG4gICAgYXdhaXQgdGhpcy5uZXh0Tm9kZShkYXRhLCBuZXh0LCBub2RlSWQpO1xuICB9XG59XG4iLCJpbXBvcnQgeyBXb3JrZXJNYW5hZ2VyIH0gZnJvbSBcIi4uL3dvcmtlci9tYW5hZ2VyXCI7XG5pbXBvcnQgeyBXb3JrZXJOb2RlIH0gZnJvbSBcIi4uL3dvcmtlci9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBDb3JlU3dpdGNoTm9kZSBleHRlbmRzIFdvcmtlck5vZGUge1xuICBrZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gXCJjb3JlX3N3aXRjaFwiO1xuICB9XG4gIG5hbWUoKSB7XG4gICAgcmV0dXJuIFwiU3dpdGNoXCI7XG4gIH1cbiAgaWNvbigpOiBzdHJpbmcge1xuICAgIHJldHVybiAnPGkgY2xhc3M9XCJmYXMgZmEtcmFuZG9tXCI+PC9pPic7XG4gIH1cbiAgcHJvcGVydGllcygpOiBhbnkge1xuICAgIHJldHVybiB7XG4gICAgICBjb25kaXRpb246IHtcbiAgICAgICAga2V5OiBcImNvbmRpdGlvblwiLFxuICAgICAgICBlZGl0OiB0cnVlLFxuICAgICAgICBkZWZhdWx0OiAxXG4gICAgICB9LFxuICAgICAgY2FzZToge1xuICAgICAgICBrZXk6IFwiY2FzZVwiLFxuICAgICAgICBlZGl0OiB0cnVlLFxuICAgICAgICBzdWI6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6IDFcbiAgICAgIH0sXG4gICAgICBjYXNlX2lucHV0OiB7XG4gICAgICAgIGtleTogXCJjYXNlX2lucHV0XCIsXG4gICAgICAgIGVkaXQ6IHRydWUsXG4gICAgICAgIGRlZmF1bHQ6ICcnXG4gICAgICB9LFxuICAgIH1cbiAgfVxuICBvcHRpb24oKTogYW55IHtcbiAgICByZXR1cm4ge1xuICAgICAgY2xhc3M6ICcnLFxuICAgICAgZG90OiB7XG4gICAgICAgIGxlZnQ6IDEsXG4gICAgICAgIHRvcDogMCxcbiAgICAgICAgcmlnaHQ6IDAsXG4gICAgICAgIGJvdHRvbTogMCxcbiAgICAgIH1cbiAgICB9XG4gIH1cbiAgaHRtbCh7IGVsTm9kZSwgbWFpbiwgbm9kZSB9OiBhbnkpOiBzdHJpbmcge1xuICAgIGNvbnN0IGNvbmRpdGlvbiA9IG5vZGUuZGF0YS5HZXQoJ2NvbmRpdGlvbicpO1xuICAgIGxldCBodG1sID0gJyc7XG4gICAgaHRtbCA9IGAke2h0bWx9PGRpdiBjbGFzcz1cIm5vZGUtY29udGVudC1yb3dcIj5cbiAgICA8ZGl2IHN0eWxlPVwidGV4dC1hbGlnbjpyaWdodFwiIGNsYXNzPVwicGwxMCBwcjEgcHQyIHBiMlwiPklucHV0PC9kaXY+XG4gICAgPGRpdiBjbGFzcz1cInBsMiBwcjEgcHQyIHBiMlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibm9kZS1mb3JtLWNvbnRyb2xcIiBub2RlOm1vZGVsPVwiY2FzZV9pbnB1dFwiLz48L2Rpdj5cbiAgICA8ZGl2PjwvZGl2PlxuICAgIDwvZGl2PmA7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNvbmRpdGlvbjsgaW5kZXgrKykge1xuICAgICAgaHRtbCA9IGAke2h0bWx9PGRpdiBjbGFzcz1cIm5vZGUtY29udGVudC1yb3dcIj5cbiAgICAgIDxkaXYgc3R5bGU9XCJ0ZXh0LWFsaWduOnJpZ2h0XCIgY2xhc3M9XCJwbDEwIHByMSBwdDIgcGIyXCI+Q2FzZTwvZGl2PlxuICAgICAgPGRpdiBjbGFzcz1cInBsMiBwcjEgcHQyIHBiMlwiPjxpbnB1dCB0eXBlPVwidGV4dFwiIGNsYXNzPVwibm9kZS1mb3JtLWNvbnRyb2xcIiBub2RlOm1vZGVsPVwiY2FzZSR7NTAwMDEgKyBpbmRleH1cIi8+PC9kaXY+XG4gICAgICA8ZGl2PjxzcGFuIGNsYXNzPVwibm9kZS1kb3RcIiBub2RlPVwiJHs1MDAwMSArIGluZGV4fVwiPjwvc3Bhbj48L2Rpdj5cbiAgICAgIDwvZGl2PmA7XG4gICAgfVxuICAgIGh0bWwgPSBgJHtodG1sfTxkaXYgY2xhc3M9XCJub2RlLWNvbnRlbnQtcm93XCI+XG4gICAgPGRpdiBjbGFzcz1cInBsMTAgcHIxIHB0MiBwYjJcIj48YnV0dG9uIGNsYXNzPVwiYnRuQWRkQ29uZGl0aW9uXCI+QWRkPC9idXR0b24+PC9kaXY+XG4gICAgPGRpdiBzdHlsZT1cInRleHQtYWxpZ246cmlnaHRcIiBjbGFzcz1cInBsMiBwcjEwIHB0MiBwYjJcIj5EZWZhdWx0PC9kaXY+XG4gICAgPGRpdj48c3BhbiBjbGFzcz1cIm5vZGUtZG90XCIgbm9kZT1cIjUwMDAwXCI+PC9zcGFuPjwvZGl2PlxuICAgIDwvZGl2PmA7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH1cbiAgc2NyaXB0KHsgZWxOb2RlLCBtYWluLCBub2RlIH06IGFueSk6IHZvaWQge1xuICAgIGVsTm9kZS5xdWVyeVNlbGVjdG9yKCcuYnRuQWRkQ29uZGl0aW9uJyk/LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgbm9kZS5kYXRhLkluY3JlYXNlKCdjb25kaXRpb24nKTtcbiAgICB9KVxuICB9XG4gIGFzeW5jIGV4ZWN1dGUobm9kZUlkOiBhbnksIGRhdGE6IGFueSwgbWFuYWdlcjogV29ya2VyTWFuYWdlciwgbmV4dDogYW55KSB7XG4gICAgY29uc3QgY29uZGl0aW9uID0gZGF0YS5jb25kaXRpb247XG4gICAgY29uc3QgY2FzZV9pbnB1dCA9IG1hbmFnZXIuZ2V0VGV4dChkYXRhLmNhc2VfaW5wdXQsbm9kZUlkKTtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgY29uZGl0aW9uICYmICFtYW5hZ2VyLmZsZ1N0b3BwaW5nOyBpbmRleCsrKSB7XG4gICAgICBsZXQgbm9kZSA9IDUwMDAxICsgaW5kZXg7XG4gICAgICBjb25zdCBjb25kaXRpb25fbm9kZSA9IGRhdGFbYGNhc2Uke25vZGV9YF07XG4gICAgICBpZiAobWFuYWdlci5nZXRUZXh0KGNvbmRpdGlvbl9ub2RlLG5vZGVJZCkgPT0gY2FzZV9pbnB1dCkge1xuICAgICAgICBhd2FpdCB0aGlzLm5leHROb2RlKGRhdGEsIG5leHQsIG5vZGVJZCwgbm9kZSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9XG4gICAgYXdhaXQgdGhpcy5uZXh0Tm9kZShkYXRhLCBuZXh0LCBub2RlSWQsIDUwMDAwKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgV29ya2VyU2V0dXAgfSBmcm9tIFwiLi4vd29ya2VyL3NldHVwXCI7XG5pbXBvcnQgeyBDb3JlQWxlcnROb2RlIH0gZnJvbSBcIi4vYWxlcnRcIjtcbmltcG9ydCB7IENvcmVBc3NpZ25Ob2RlIH0gZnJvbSBcIi4vYXNzaWduXCI7XG5pbXBvcnQgeyBDb3JlQmVnaW5Ob2RlIH0gZnJvbSBcIi4vYmVnaW5cIjtcbmltcG9ydCB7IENvcmVDb25zb2xlTm9kZSB9IGZyb20gXCIuL2NvbnNvbGVcIjtcbmltcG9ydCB7IENvcmVEZWxheU5vZGUgfSBmcm9tIFwiLi9kZWxheVwiO1xuaW1wb3J0IHsgQ29yZUVuZE5vZGUgfSBmcm9tIFwiLi9lbmRcIjtcbmltcG9ydCB7IENvcmVGb3JOb2RlIH0gZnJvbSBcIi4vZm9yXCI7XG5pbXBvcnQgeyBDb3JlR3JvdXBOb2RlIH0gZnJvbSBcIi4vZ3JvdXBcIjtcbmltcG9ydCB7IENvcmVJZk5vZGUgfSBmcm9tIFwiLi9pZlwiO1xuaW1wb3J0IHsgQ29yZVByb2plY3ROb2RlIH0gZnJvbSBcIi4vcHJvamVjdFwiO1xuaW1wb3J0IHsgQ29yZVN3aXRjaE5vZGUgfSBmcm9tIFwiLi9zd2l0Y2hcIjtcblxuZXhwb3J0IGNsYXNzIENvcmVTZXR1cCBleHRlbmRzIFdvcmtlclNldHVwIHtcbiAgbm9kZXMoKTogYW55W10ge1xuICAgIHJldHVybiBbXG4gICAgICBDb3JlQmVnaW5Ob2RlLFxuICAgICAgQ29yZUVuZE5vZGUsXG4gICAgICBDb3JlQXNzaWduTm9kZSxcbiAgICAgIENvcmVEZWxheU5vZGUsXG4gICAgICBDb3JlSWZOb2RlLFxuICAgICAgQ29yZVN3aXRjaE5vZGUsXG4gICAgICBDb3JlRm9yTm9kZSxcbiAgICAgIENvcmVBbGVydE5vZGUsXG4gICAgICBDb3JlQ29uc29sZU5vZGUsXG4gICAgICBDb3JlUHJvamVjdE5vZGUsXG4gICAgICBDb3JlR3JvdXBOb2RlLFxuICAgIF07XG4gIH1cbn1cbiIsImltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi9ub2RlXCI7XG5cbmV4cG9ydCBjbGFzcyBXb3JrZXJTZXR1cCB7XG4gIG5vZGVzKCk6IGFueVtdIHtcbiAgICByZXR1cm4gW107XG4gIH1cbiAgbmV3Tm9kZXMoKTogV29ya2VyTm9kZVtdIHtcbiAgICByZXR1cm4gdGhpcy5ub2RlcygpLm1hcCgoaXRlbSkgPT4gKG5ldyBpdGVtKCkpKVxuICB9XG59XG4iLCJleHBvcnQgY2xhc3MgV29ya2VyU2NyaXB0IHtcbiAgcHJpdmF0ZSBydW5Db2RlSW5Ccm93c2VyKHNjcmlwdDogc3RyaW5nLCB2YXJpYWJsZU9iajogYW55KSB7XG4gICAgcmV0dXJuIHdpbmRvdy5ldmFsKHRoaXMuR2V0VGV4dEluQnJvd3NlcihzY3JpcHQsIHZhcmlhYmxlT2JqKSk7XG4gIH1cbiAgcHJpdmF0ZSBHZXRUZXh0SW5Ccm93c2VyKHNjcmlwdDogc3RyaW5nLCB2YXJpYWJsZU9iajogYW55KSB7XG4gICAgbGV0IHBhcmFtVGV4dCA9IFwiXCI7XG4gICAgbGV0IHBhcmFtVmFsdWU6IGFueSA9IFtdO1xuICAgIGlmICghdmFyaWFibGVPYmopIHZhcmlhYmxlT2JqID0ge307XG4gICAgZm9yIChsZXQga2V5IG9mIE9iamVjdC5rZXlzKHZhcmlhYmxlT2JqKSkge1xuICAgICAgaWYgKHBhcmFtVGV4dCAhPSBcIlwiKSB7XG4gICAgICAgIHBhcmFtVGV4dCA9IGAke3BhcmFtVGV4dH0sJHtrZXl9YDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhcmFtVGV4dCA9IGtleTtcbiAgICAgIH1cbiAgICAgIHBhcmFtVmFsdWUgPSBbLi4ucGFyYW1WYWx1ZSwgdmFyaWFibGVPYmpba2V5XV07XG4gICAgfVxuICAgIHJldHVybiB3aW5kb3cuZXZhbCgnKCgnICsgcGFyYW1UZXh0ICsgJyk9PihgJyArIHNjcmlwdCArICdgKSknKSguLi5wYXJhbVZhbHVlKVxuICB9XG4gIHByaXZhdGUgR2V0VGV4dEluTm9kZShzY3JpcHQ6IHN0cmluZywgdmFyaWFibGVPYmo6IGFueSkge1xuICAgIHJldHVybiBcIlwiO1xuICB9XG4gIHByaXZhdGUgcnVuQ29kZUluTm9kZShzY3JpcHQ6IHN0cmluZywgdmFyaWFibGVPYmo6IGFueSkge1xuICAgIGNvbnN0IHsgVk0gfSA9IHJlcXVpcmUoJ3ZtMicpO1xuICAgIGNvbnN0IHZtID0gbmV3IFZNKCk7XG4gICAgcmV0dXJuIHZtLnJ1bkluQ29udGV4dChzY3JpcHQsIHZhcmlhYmxlT2JqKTtcbiAgfVxuICBwdWJsaWMgcnVuQ29kZShzY3JpcHQ6IHN0cmluZywgdmFyaWFibGVPYmo6IGFueSkge1xuICAgIGlmICh3aW5kb3cgIT0gdW5kZWZpbmVkICYmIGRvY3VtZW50ICE9IHVuZGVmaW5lZCkge1xuICAgICAgcmV0dXJuIHRoaXMucnVuQ29kZUluQnJvd3NlcihzY3JpcHQsIHZhcmlhYmxlT2JqKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmV0dXJuIHRoaXMucnVuQ29kZUluTm9kZShzY3JpcHQsIHZhcmlhYmxlT2JqKTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldFRleHQoc2NyaXB0OiBzdHJpbmcsIHZhcmlhYmxlT2JqOiBhbnkpIHtcbiAgICBpZiAod2luZG93ICE9IHVuZGVmaW5lZCAmJiBkb2N1bWVudCAhPSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiB0aGlzLkdldFRleHRJbkJyb3dzZXIoc2NyaXB0LCB2YXJpYWJsZU9iaik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLkdldFRleHRJbk5vZGUoc2NyaXB0LCB2YXJpYWJsZU9iaik7XG4gICAgfVxuICB9XG59XG4iLCJpbXBvcnQgeyBOb2RlQmVnaW4gfSBmcm9tIFwiLi4vbm9kZXMvYmVnaW5cIjtcbmltcG9ydCB7IFdvcmtlck5vZGUgfSBmcm9tIFwiLi9ub2RlXCI7XG5pbXBvcnQgeyBXb3JrZXJTY3JpcHQgfSBmcm9tIFwiLi9zY3JpcHRcIjtcbmltcG9ydCB7IFdvcmtlclNldHVwIH0gZnJvbSBcIi4vc2V0dXBcIjtcbmV4cG9ydCBjb25zdCBQcm9wZXJ0eUVudW0gPSB7XG4gIG1haW46IFwibWFpbl9wcm9qZWN0XCIsXG4gIHNvbHV0aW9uOiAnbWFpbl9zb2x1dGlvbicsXG4gIGxpbmU6ICdtYWluX2xpbmUnLFxuICB2YXJpYWJsZTogJ21haW5fdmFyaWFibGUnLFxuICBncm91cENhdmFzOiBcIm1haW5fZ3JvdXBDYXZhc1wiLFxufTtcbmV4cG9ydCBjbGFzcyBXb3JrZXJNYW5hZ2VyIHtcbiAgcHJpdmF0ZSBldmVudHM6IGFueSA9IHt9O1xuICBwdWJsaWMgc2NyaXB0Q29kZTogV29ya2VyU2NyaXB0ID0gbmV3IFdvcmtlclNjcmlwdCgpO1xuICBwcml2YXRlIHZhcmlhYmxlVmFsdWU6IGFueSA9IHt9O1xuICBwdWJsaWMgb25TYWZlKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpIHtcbiAgICB0aGlzLnJlbW92ZUxpc3RlbmVyKGV2ZW50LCBjYWxsYmFjayk7XG4gICAgdGhpcy5vbihldmVudCwgY2FsbGJhY2spO1xuICB9XG4gIC8qIEV2ZW50cyAqL1xuICBwdWJsaWMgb24oZXZlbnQ6IHN0cmluZywgY2FsbGJhY2s6IGFueSkge1xuICAgIC8vIENoZWNrIGlmIHRoZSBjYWxsYmFjayBpcyBub3QgYSBmdW5jdGlvblxuICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZSBsaXN0ZW5lciBjYWxsYmFjayBtdXN0IGJlIGEgZnVuY3Rpb24sIHRoZSBnaXZlbiB0eXBlIGlzICR7dHlwZW9mIGNhbGxiYWNrfWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB0aGUgZXZlbnQgaXMgbm90IGEgc3RyaW5nXG4gICAgaWYgKHR5cGVvZiBldmVudCAhPT0gJ3N0cmluZycpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoYFRoZSBldmVudCBuYW1lIG11c3QgYmUgYSBzdHJpbmcsIHRoZSBnaXZlbiB0eXBlIGlzICR7dHlwZW9mIGV2ZW50fWApO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICAvLyBDaGVjayBpZiB0aGlzIGV2ZW50IG5vdCBleGlzdHNcbiAgICBpZiAodGhpcy5ldmVudHNbZXZlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHRoaXMuZXZlbnRzW2V2ZW50XSA9IHtcbiAgICAgICAgbGlzdGVuZXJzOiBbXVxuICAgICAgfVxuICAgIH1cbiAgICB0aGlzLmV2ZW50c1tldmVudF0ubGlzdGVuZXJzLnB1c2goY2FsbGJhY2spO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUxpc3RlbmVyKGV2ZW50OiBzdHJpbmcsIGNhbGxiYWNrOiBhbnkpIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGV2ZW50IG5vdCBleGlzdHNcblxuICAgIGlmICghdGhpcy5ldmVudHNbZXZlbnRdKSByZXR1cm4gZmFsc2VcblxuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuZXZlbnRzW2V2ZW50XS5saXN0ZW5lcnNcbiAgICBjb25zdCBsaXN0ZW5lckluZGV4ID0gbGlzdGVuZXJzLmluZGV4T2YoY2FsbGJhY2spXG4gICAgY29uc3QgaGFzTGlzdGVuZXIgPSBsaXN0ZW5lckluZGV4ID4gLTFcbiAgICBpZiAoaGFzTGlzdGVuZXIpIGxpc3RlbmVycy5zcGxpY2UobGlzdGVuZXJJbmRleCwgMSlcbiAgfVxuXG4gIHB1YmxpYyBkaXNwYXRjaChldmVudDogc3RyaW5nLCBkZXRhaWxzOiBhbnkpIHtcbiAgICAvLyBDaGVjayBpZiB0aGlzIGV2ZW50IG5vdCBleGlzdHNcbiAgICBpZiAodGhpcy5ldmVudHNbZXZlbnRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgdGhpcy5ldmVudHNbZXZlbnRdLmxpc3RlbmVycy5mb3JFYWNoKChsaXN0ZW5lcjogYW55KSA9PiB7XG4gICAgICBsaXN0ZW5lcihkZXRhaWxzKTtcbiAgICB9KTtcbiAgfVxuICBwcml2YXRlICRkYXRhOiBhbnk7XG4gIHByaXZhdGUgJG5vZGVzOiBXb3JrZXJOb2RlW10gPSBbXTtcbiAgcHJpdmF0ZSAkcHJvamVjdDogYW55O1xuICBwcml2YXRlICRncm91cDogYW55ID0gXCJyb290XCI7XG4gIHByaXZhdGUgZGVsYXlfdGltZTogbnVtYmVyID0gMTAwO1xuICBwdWJsaWMgY29uc3RydWN0b3IoZGF0YTogYW55ID0gbnVsbCkge1xuICAgIHRoaXMuTG9hZERhdGEoZGF0YSk7XG4gIH1cbiAgcHVibGljIHNldFByb2plY3QocHJvamVjdDogYW55KSB7XG4gICAgdGhpcy4kcHJvamVjdCA9IHByb2plY3Q7XG4gICAgdGhpcy4kZ3JvdXAgPSBcInJvb3RcIjtcbiAgICBpZiAodGhpcy52YXJpYWJsZVZhbHVlW3RoaXMuJHByb2plY3RdID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGxldCBwcmogPSB0aGlzLmdldFByb2plY3RCeUlkKHRoaXMuJHByb2plY3QpO1xuICAgICAgdGhpcy52YXJpYWJsZVZhbHVlW3RoaXMuJHByb2plY3RdID0gcHJqLnZhcmlhYmxlLm1hcCgoaXRlbTogYW55KSA9PiB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4uaXRlbSxcbiAgICAgICAgICB2YWx1ZTogaXRlbS5pbml0YWxWYWx1ZVxuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cbiAgcHVibGljIGdldFByb2plY3RCeUlkKGlkOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy4kZGF0YT8ucHJvamVjdHM/LmZpbmQoKGl0ZW06IGFueSkgPT4gaXRlbS5pZCA9PSBpZCk7XG4gIH1cbiAgcHVibGljIGdldFByb2plY3QoKSB7XG4gICAgaWYgKHRoaXMuJGRhdGEua2V5ID09PSBQcm9wZXJ0eUVudW0uc29sdXRpb24pIHtcbiAgICAgIHJldHVybiB0aGlzLmdldFByb2plY3RCeUlkKHRoaXMuJHByb2plY3QpO1xuICAgIH1cbiAgICBpZiAodGhpcy4kZGF0YS5rZXkgPT09IFByb3BlcnR5RW51bS5tYWluKSB7XG4gICAgICByZXR1cm4gdGhpcy4kZGF0YTtcbiAgICB9XG4gIH1cbiAgcHVibGljIHNldEdyb3VwKGdyb3VwOiBhbnkpIHtcbiAgICB0aGlzLiRncm91cCA9IGdyb3VwO1xuICB9XG4gIHB1YmxpYyBnZXRHcm91cEN1cnJlbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuJGdyb3VwO1xuICB9XG4gIHB1YmxpYyBnZXRQcm9qZWN0Q3VycmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy4kcHJvamVjdDtcbiAgfVxuICBwdWJsaWMgZ2V0Tm9kZUluR3JvdXAoZ3JvdXA6IGFueSA9IG51bGwpIHtcbiAgICBsZXQgX2dyb3VwID0gZ3JvdXAgPz8gdGhpcy4kZ3JvdXA7XG4gICAgcmV0dXJuIHRoaXMuZ2V0UHJvamVjdCgpPy5ub2Rlcz8uZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0uZ3JvdXAgPT0gX2dyb3VwKTtcbiAgfVxuICBwdWJsaWMgZ2V0Tm9kZUJ5SWQoX2lkOiBhbnkpIHtcbiAgICByZXR1cm4gdGhpcy5nZXROb2RlSW5Hcm91cCgpPy5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5pZCA9PSBfaWQpPy5bMF07XG4gIH1cblxuICBwdWJsaWMgZ2V0Tm9kZUJ5S2V5KF9rZXk6IGFueSkge1xuICAgIHJldHVybiB0aGlzLmdldE5vZGVJbkdyb3VwKCk/LmZpbHRlcigoaXRlbTogYW55KSA9PiBpdGVtLmtleSA9PSBfa2V5KT8uWzBdO1xuICB9XG4gIHB1YmxpYyBMb2FkRGF0YShkYXRhOiBhbnkpOiBXb3JrZXJNYW5hZ2VyIHtcbiAgICBpZiAoIWRhdGEpIHJldHVybiB0aGlzO1xuICAgIHRoaXMudmFyaWFibGVWYWx1ZSA9IHt9XG4gICAgaWYgKHR5cGVvZiBkYXRhID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy4kZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuJGRhdGEgPSBkYXRhO1xuICAgIH1cbiAgICBpZiAodGhpcy4kZGF0YS5rZXkgPT09IFByb3BlcnR5RW51bS5zb2x1dGlvbikge1xuICAgICAgdGhpcy4kcHJvamVjdCA9IHRoaXMuJGRhdGEucHJvamVjdDtcbiAgICB9XG4gICAgaWYgKCF0aGlzLiRwcm9qZWN0KSB7XG4gICAgICB0aGlzLiRwcm9qZWN0ID0gdGhpcy4kZGF0YS5wcm9qZWN0cz8uWzBdPy5pZDtcbiAgICB9XG4gICAgdGhpcy5zZXRQcm9qZWN0KHRoaXMuJHByb2plY3QpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIG5ld1NldHVwKHNldHVwOiBhbnkpIHtcbiAgICB0aGlzLlNldHVwKG5ldyBzZXR1cCgpKTtcbiAgfVxuICBwdWJsaWMgU2V0dXAoc2V0dXA6IFdvcmtlclNldHVwKSB7XG4gICAgdGhpcy4kbm9kZXMgPSBbLi4udGhpcy4kbm9kZXMsIC4uLnNldHVwLm5ld05vZGVzKCldO1xuICB9XG4gIHB1YmxpYyBnZXRDb250cm9sTm9kZXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuJG5vZGVzLm1hcCgoaXRlbTogYW55KSA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi57XG4gICAgICAgICAga2V5OiBcIlwiLFxuICAgICAgICAgIG5hbWU6IFwiXCIsXG4gICAgICAgICAgZ3JvdXA6IFwiXCIsXG4gICAgICAgICAgaHRtbDogXCJcIixcbiAgICAgICAgICBzY3JpcHQ6IFwiXCIsXG4gICAgICAgICAgcHJvcGVydGllczogXCJcIixcbiAgICAgICAgICBkb3Q6IHtcbiAgICAgICAgICAgIGxlZnQ6IDEsXG4gICAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgICByaWdodDogMSxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIC4uLml0ZW0ub3B0aW9uKCkgPz8ge30sXG4gICAgICAgIGtleTogaXRlbS5rZXkoKSxcbiAgICAgICAgbmFtZTogaXRlbS5uYW1lKCksXG4gICAgICAgIGljb246IGl0ZW0uaWNvbigpLFxuICAgICAgICBncm91cDogaXRlbS5ncm91cCgpLFxuICAgICAgICBodG1sOiBpdGVtLmh0bWwsXG4gICAgICAgIHNjcmlwdDogaXRlbS5zY3JpcHQsXG4gICAgICAgIHByb3BlcnRpZXM6IGl0ZW0ucHJvcGVydGllcygpID8/IHt9LFxuICAgICAgfVxuICAgIH0pXG4gIH1cbiAgcHJpdmF0ZSBnZXRXb3JrZXJOb2RlKF9rZXk6IHN0cmluZyk6IFdvcmtlck5vZGUgfCBudWxsIHtcbiAgICByZXR1cm4gdGhpcy4kbm9kZXM/LmZpbHRlcigoaXRlbSkgPT4gaXRlbS5jaGVja0tleShfa2V5KSk/LlswXTtcbiAgfVxuICBwcml2YXRlIGFzeW5jIGV4Y3V0ZU5vZGUoJGlkOiBhbnkpIHtcbiAgICBjb25zdCBkYXRhTm9kZSA9IHRoaXMuZ2V0Tm9kZUJ5SWQoJGlkKTtcbiAgICBhd2FpdCB0aGlzLmV4Y3V0ZURhdGFOb2RlKGRhdGFOb2RlKTtcbiAgfVxuICBkZWxheSh0aW1lOiBudW1iZXIgPSAxMDApIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIHRpbWUpKTtcbiAgfVxuICBwcml2YXRlIGFzeW5jIGV4Y3V0ZURhdGFOb2RlKGRhdGFOb2RlOiBhbnkpIHtcbiAgICBpZiAodGhpcy5mbGdTdG9wcGluZykge1xuICAgICAgdGhpcy5kaXNwYXRjaCgnd29ya2VyX3N0b3BwaW5nJywge30pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBhd2FpdCB0aGlzLmRlbGF5KHRoaXMuZGVsYXlfdGltZSk7XG4gICAgaWYgKGRhdGFOb2RlKSB7XG4gICAgICB0aGlzLmRpc3BhdGNoKCdub2RlX3N0YXJ0JywgeyBub2RlOiBkYXRhTm9kZSB9KTtcbiAgICAgIGNvbnN0IHdvcmtlck5vZGUgPSB0aGlzLmdldFdvcmtlck5vZGUoZGF0YU5vZGUua2V5KTtcbiAgICAgIGF3YWl0IHdvcmtlck5vZGU/LmV4ZWN1dGUoZGF0YU5vZGUuaWQsIGRhdGFOb2RlLCB0aGlzLCB0aGlzLmV4Y3V0ZU5vZGUuYmluZCh0aGlzKSk7XG4gICAgICB0aGlzLmRpc3BhdGNoKCdub2RlX2VuZCcsIHsgbm9kZTogZGF0YU5vZGUgfSk7XG4gICAgfVxuICB9XG4gIHB1YmxpYyBhc3luYyBleGN1dGVBc3luYygpIHtcbiAgICBjb25zdCBkYXRhTm9kZSA9IHRoaXMuZ2V0Tm9kZUJ5S2V5KGAke05vZGVCZWdpbn1gKTtcbiAgICBhd2FpdCB0aGlzLmV4Y3V0ZURhdGFOb2RlKGRhdGFOb2RlKTtcbiAgfVxuICBwdWJsaWMgZXhjdXRlKCkge1xuICAgIHNldFRpbWVvdXQoYXN5bmMgKCkgPT4ge1xuICAgICAgdGhpcy5kaXNwYXRjaCgnd29ya2VyX3N0YXJ0Jywge30pO1xuICAgICAgdHJ5IHtcbiAgICAgICAgdGhpcy5mbGdTdG9wcGluZyA9IGZhbHNlO1xuICAgICAgICBhd2FpdCB0aGlzLmV4Y3V0ZUFzeW5jKCk7XG4gICAgICAgIHRoaXMuZmxnU3RvcHBpbmcgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCgnd29ya2VyX2VuZCcsIHt9KTtcbiAgICAgIH0gY2F0Y2ggKGV4KSB7XG4gICAgICAgIGNvbnNvbGUubG9nKGV4KTtcbiAgICAgICAgdGhpcy5kaXNwYXRjaCgnd29ya2VyX2VuZCcsIHt9KTtcbiAgICAgIH1cbiAgICAgIHRoaXMuZmxnU3RvcHBpbmcgPSBmYWxzZTtcbiAgICB9KTtcbiAgfVxuICBmbGdTdG9wcGluZzogYW55ID0gbnVsbDtcbiAgcHVibGljIHN0b3AoKSB7XG4gICAgdGhpcy5mbGdTdG9wcGluZyA9IHRydWU7XG4gIH1cbiAgcHVibGljIHNldFZhcmlhYmxlT2JqZWN0KG5hbWU6IHN0cmluZywgdmFsdWU6IGFueSwgbm9kZUlkOiBhbnksIHByb2plY3Q6IGFueSA9IG51bGwpIHtcbiAgICBsZXQgdHJlZVNjb3BlID0gW25vZGVJZF07XG4gICAgd2hpbGUgKG5vZGVJZCAhPSAncm9vdCcpIHtcbiAgICAgIGxldCBub2RlID0gdGhpcy5nZXROb2RlQnlJZChub2RlSWQpO1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZUlkID0gbm9kZS5ncm91cFxuICAgICAgICB0cmVlU2NvcGUgPSBbLi4udHJlZVNjb3BlLCBub2RlSWRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZUlkID0gJ3Jvb3QnXG4gICAgICAgIHRyZWVTY29wZSA9IFsuLi50cmVlU2NvcGUsIG5vZGVJZF07XG4gICAgICB9XG4gICAgfVxuICAgIGxldCAkdmFyaWFibGUgPSB0aGlzLnZhcmlhYmxlVmFsdWVbcHJvamVjdCA/PyB0aGlzLiRwcm9qZWN0XTtcbiAgICBjb25zdCB0cmVlTGVuZ2h0ID0gdHJlZVNjb3BlLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdHJlZUxlbmdodDsgaSsrKSB7XG4gICAgICBsZXQgaXRlbSA9ICR2YXJpYWJsZS5maWx0ZXIoKGl0ZW06IGFueSkgPT4gaXRlbS5zY29wZSA9PT0gdHJlZVNjb3BlW2ldICYmIGl0ZW0ubmFtZSA9PSBuYW1lKT8uWzBdO1xuICAgICAgaWYgKGl0ZW0pIHtcbiAgICAgICAgaXRlbS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHB1YmxpYyBnZXRWYXJpYWJsZU9iamVjdChub2RlSWQ6IGFueSwgcHJvamVjdDogYW55ID0gbnVsbCkge1xuICAgIGNvbnN0IHZhcmlhYmxlT2JqOiBhbnkgPSB7fTtcbiAgICBsZXQgdHJlZVNjb3BlID0gW25vZGVJZF07XG4gICAgd2hpbGUgKG5vZGVJZCAhPSAncm9vdCcpIHtcbiAgICAgIGxldCBub2RlID0gdGhpcy5nZXROb2RlQnlJZChub2RlSWQpO1xuICAgICAgaWYgKG5vZGUpIHtcbiAgICAgICAgbm9kZUlkID0gbm9kZS5ncm91cFxuICAgICAgICB0cmVlU2NvcGUgPSBbLi4udHJlZVNjb3BlLCBub2RlSWRdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgbm9kZUlkID0gJ3Jvb3QnXG4gICAgICAgIHRyZWVTY29wZSA9IFsuLi50cmVlU2NvcGUsIG5vZGVJZF07XG4gICAgICB9XG4gICAgfVxuICAgIGxldCAkdmFyaWFibGUgPSB0aGlzLnZhcmlhYmxlVmFsdWVbcHJvamVjdCA/PyB0aGlzLiRwcm9qZWN0XTtcbiAgICBjb25zdCB0cmVlTGVuZ2h0ID0gdHJlZVNjb3BlLmxlbmd0aCAtIDE7XG4gICAgZm9yIChsZXQgaSA9IHRyZWVMZW5naHQ7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAkdmFyaWFibGUuZmlsdGVyKChpdGVtOiBhbnkpID0+IGl0ZW0uc2NvcGUgPT09IHRyZWVTY29wZVtpXSk/LmZvckVhY2goKGl0ZW06IGFueSkgPT4ge1xuICAgICAgICB2YXJpYWJsZU9ialtpdGVtLm5hbWVdID0gaXRlbS52YWx1ZTtcbiAgICAgIH0pXG4gICAgfVxuICAgIHJldHVybiB2YXJpYWJsZU9iajtcbiAgfVxuICBwdWJsaWMgcnVuQ29kZSgkc2NycGl0OiBhbnksIG5vZGVJZDogYW55KTogYW55IHtcbiAgICBjb25zdCB2YXJpYWJsZU9iaiA9IHRoaXMuZ2V0VmFyaWFibGVPYmplY3Qobm9kZUlkKTtcbiAgICByZXR1cm4gdGhpcy5zY3JpcHRDb2RlLnJ1bkNvZGUoJHNjcnBpdCwgdmFyaWFibGVPYmopO1xuICB9XG4gIHB1YmxpYyBnZXRUZXh0KCRzY3JwaXQ6IGFueSwgbm9kZUlkOiBhbnkpOiBhbnkge1xuICAgIGNvbnN0IHZhcmlhYmxlT2JqID0gdGhpcy5nZXRWYXJpYWJsZU9iamVjdChub2RlSWQpO1xuICAgIHJldHVybiB0aGlzLnNjcmlwdENvZGUuZ2V0VGV4dCgkc2NycGl0LCB2YXJpYWJsZU9iaik7XG4gIH1cbn1cbmV4cG9ydCBjb25zdCB3b3JrZXJNYW5hZ2VyID0gbmV3IFdvcmtlck1hbmFnZXIoKTtcbiIsImltcG9ydCB7IENvcmVTZXR1cCB9IGZyb20gJy4vbm9kZXMvaW5kZXgnO1xuaW1wb3J0IHsgd29ya2VyTWFuYWdlciwgV29ya2VyTWFuYWdlciB9IGZyb20gJy4vd29ya2VyL2luZGV4Jztcblxud29ya2VyTWFuYWdlci5uZXdTZXR1cChDb3JlU2V0dXApO1xuXG5leHBvcnQgZGVmYXVsdCB7XG4gIENvcmVTZXR1cCxcbiAgV29ya2VyTWFuYWdlcixcbiAgd29ya2VyTWFuYWdlclxufTtcbiJdLCJuYW1lcyI6WyJFbnZOb2RlIiwiV29ya2VyTm9kZSIsImVudiIsIkFsbCIsIkNsb3VkIiwiUEMiLCJXZWIiLCJNb2JpbGUiLCJJT1MiLCJBbmRyb2lkIiwiQ2hlY2tFbnYiLCJ0aGlzIiwiaW5jbHVkZXMiLCJrZXkiLCJjb25zdHJ1Y3RvciIsIm5hbWUiLCJjaGVja0tleSIsImljb24iLCJncm91cCIsImh0bWwiLCJlbE5vZGUiLCJtYWluIiwibm9kZSIsInNjcmlwdCIsInByb3BlcnRpZXMiLCJvcHRpb24iLCJhc3luYyIsIm5vZGVJZCIsImRhdGEiLCJtYW5hZ2VyIiwibmV4dCIsImluZGV4IiwibGluZXMiLCJpdGVtIiwiZnJvbSIsImZyb21JbmRleCIsInRvIiwiQ29yZUFsZXJ0Tm9kZSIsIm1lc3NhZ2UiLCJlZGl0IiwiZGVmYXVsdCIsImFsZXJ0IiwiZ2V0VGV4dCIsIm5leHROb2RlIiwiQ29yZUFzc2lnbk5vZGUiLCJlbnZfbmFtZSIsImVudl92YWx1ZSIsImNsYXNzIiwiZG90IiwibGVmdCIsInRvcCIsInJpZ2h0IiwiYm90dG9tIiwiTm9kZUJlZ2luIiwiQ29yZUJlZ2luTm9kZSIsIm9ubHlOb2RlIiwic29ydCIsIkNvcmVDb25zb2xlTm9kZSIsImNvbnNvbGUiLCJsb2ciLCJDb3JlRGVsYXlOb2RlIiwibnVtYmVyX2RlbGF5IiwiZGVsYXkiLCJydW5Db2RlIiwiQ29yZUVuZE5vZGUiLCJDb3JlRm9yTm9kZSIsIm51bWJlcl9zdGFydCIsIm51bWJlcl9lbmQiLCJudW1iZXJfc3RlcCIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwicGFyZW50Iiwib3Blbkdyb3VwIiwiR2V0SWQiLCJ0ZW1wX2Vudl9uYW1lIiwidGVtcF92YWx1ZSIsInRlbXAiLCJHZXQiLCJjaGFuZ2VWYXJpYWJsZU5hbWUiLCJTZXQiLCJuZXdWYXJpYWJsZSIsImdldEdyb3VwQ3VycmVudCIsInNldEdyb3VwIiwiaWQiLCJsb29wX2luZGV4IiwiZmxnU3RvcHBpbmciLCJzZXRWYXJpYWJsZU9iamVjdCIsImV4Y3V0ZUFzeW5jIiwiQ29yZUdyb3VwTm9kZSIsIkNvcmVJZk5vZGUiLCJjb25kaXRpb24iLCJjb25kIiwic3ViIiwiSW5jcmVhc2UiLCJjb25kaXRpb25fbm9kZSIsIkNvcmVQcm9qZWN0Tm9kZSIsInByb2plY3QiLCJzZWxlY3QiLCJkYXRhU2VsZWN0IiwiZ2V0UHJvamVjdEFsbCIsIm1hcCIsInZhbHVlIiwidGV4dCIsImdldFByb2plY3RDdXJyZW50Iiwic2V0UHJvamVjdCIsIkNvcmVTd2l0Y2hOb2RlIiwiY2FzZSIsImNhc2VfaW5wdXQiLCJDb3JlU2V0dXAiLCJub2RlcyIsIm5ld05vZGVzIiwiV29ya2VyU2NyaXB0IiwicnVuQ29kZUluQnJvd3NlciIsInZhcmlhYmxlT2JqIiwid2luZG93IiwiZXZhbCIsIkdldFRleHRJbkJyb3dzZXIiLCJwYXJhbVRleHQiLCJwYXJhbVZhbHVlIiwiT2JqZWN0Iiwia2V5cyIsIkdldFRleHRJbk5vZGUiLCJydW5Db2RlSW5Ob2RlIiwiVk0iLCJyZXF1aXJlIiwicnVuSW5Db250ZXh0IiwidW5kZWZpbmVkIiwiZG9jdW1lbnQiLCJQcm9wZXJ0eUVudW0iLCJXb3JrZXJNYW5hZ2VyIiwiZXZlbnRzIiwic2NyaXB0Q29kZSIsInZhcmlhYmxlVmFsdWUiLCJvblNhZmUiLCJldmVudCIsImNhbGxiYWNrIiwicmVtb3ZlTGlzdGVuZXIiLCJvbiIsImVycm9yIiwibGlzdGVuZXJzIiwicHVzaCIsImxpc3RlbmVySW5kZXgiLCJpbmRleE9mIiwic3BsaWNlIiwiZGlzcGF0Y2giLCJkZXRhaWxzIiwiZm9yRWFjaCIsImxpc3RlbmVyIiwiJGRhdGEiLCIkbm9kZXMiLCIkcHJvamVjdCIsIiRncm91cCIsImRlbGF5X3RpbWUiLCJMb2FkRGF0YSIsInByaiIsImdldFByb2plY3RCeUlkIiwidmFyaWFibGUiLCJpbml0YWxWYWx1ZSIsInByb2plY3RzIiwiZmluZCIsImdldFByb2plY3QiLCJnZXROb2RlSW5Hcm91cCIsIl9ncm91cCIsImZpbHRlciIsImdldE5vZGVCeUlkIiwiX2lkIiwiZ2V0Tm9kZUJ5S2V5IiwiX2tleSIsIkpTT04iLCJwYXJzZSIsIm5ld1NldHVwIiwic2V0dXAiLCJTZXR1cCIsImdldENvbnRyb2xOb2RlcyIsImdldFdvcmtlck5vZGUiLCIkaWQiLCJkYXRhTm9kZSIsImV4Y3V0ZURhdGFOb2RlIiwidGltZSIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsIndvcmtlck5vZGUiLCJleGVjdXRlIiwiZXhjdXRlTm9kZSIsImJpbmQiLCJleGN1dGUiLCJleCIsInN0b3AiLCJ0cmVlU2NvcGUiLCIkdmFyaWFibGUiLCJ0cmVlTGVuZ2h0IiwibGVuZ3RoIiwiaSIsInNjb3BlIiwiZ2V0VmFyaWFibGVPYmplY3QiLCIkc2NycGl0Iiwid29ya2VyTWFuYWdlciJdLCJtYXBwaW5ncyI6Ijs7Ozs7OzRDQUVBLElBQVlBLEdBQVosU0FBWUEsR0FDVkEsRUFBQUEsRUFBQSxJQUFBLEdBQUEsTUFDQUEsRUFBQUEsRUFBQSxJQUFBLEdBQUEsTUFDQUEsRUFBQUEsRUFBQSxHQUFBLEdBQUEsS0FDQUEsRUFBQUEsRUFBQSxNQUFBLEdBQUEsUUFDQUEsRUFBQUEsRUFBQSxPQUFBLEdBQUEsU0FDQUEsRUFBQUEsRUFBQSxJQUFBLEdBQUEsTUFDQUEsRUFBQUEsRUFBQSxRQUFBLEdBQUEsVUFQRixDQUFZQSxJQUFBQSxFQVFYLFdBZ0JZQyxFQUNYQyxNQUNFLE1BQU8sQ0FBQ0YsRUFBUUcsSUFBS0gsRUFBUUksTUFBT0osRUFBUUssR0FBSUwsRUFBUU0sSUFBS04sRUFBUU8sT0FBUVAsRUFBUVEsSUFBS1IsRUFBUVMsU0FFN0ZDLFNBQVNSLEdBQ2QsT0FBT1MsS0FBS1QsTUFBTVUsU0FBU1YsR0FFN0JXLE1BQ0UsT0FBT0YsS0FBS0csWUFBWUMsS0FFbkJDLFNBQVNILEdBQ2QsT0FBT0YsS0FBS0UsT0FB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
